(function(n,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(n=typeof globalThis<"u"?globalThis:n||self,f(n.MyReact={}))})(this,function(n){"use strict";const f={id:0,effectId:0,component:null};function h(e,t){for(let i in t)i.startsWith("on")?e.addEventListener(i.slice("2").toLowerCase(),t[i]):e.setAttribute(i,t[i])}function s(e){if(e.type==="text"){let l=document.createTextNode(String(e.value));return e.node=l,l}if(typeof e.type=="function")return p(e);const t=document.createElement(e.type);e.node=t,h(t,e.props);const i=e.children;for(let l in i){let r=s(i[l]);t.appendChild(r)}return t}function p(e){f.id=0,f.effectId=0,f.component=e;const t=e.type(e.props),i=s(t);return e.component=t,e.effects.forEach(l=>l.cleanup=l.callback()),i}function c(e){e.effects.forEach(t=>{t.cleanup&&t.cleanup()}),e.component.children.forEach(t=>{typeof t.type=="function"&&c(t)})}function a(e,t){return t.some((i,l)=>!Object.is(e[l],i))}function y(e,t){for(let i in t)if(!Object.is(e[i],t[i]))return!0}function d(e,t){if(e.type===t.type){if(e.type==="text")return e.value!==t.value&&(e.value=t.value,e.node.nodeValue=t.value),e;if(typeof e.type=="function")return y(e.props,t.props)&&(e.props=t.props,o(e)),e;{v(e.node,e.props,t.props);const{children:i}=t,{children:l}=e;if(l.length===i.length){for(let r in l)l[r]=d(l[r],i[r]);return e}else if(l.length>i.length){for(let u in i)l[u]=d(l[u],i[u]);let r=i.length;for(;l[r];)typeof l[r].type=="function"?l[r].node.node.remove():(console.log(l[r]),l[r].node.remove()),l.splice(r,1);return e}else{for(let u in l)l[u]=d(l[u],i[u]);let r=l.length;for(;i[r];){let u=s(i[r]);e.node.appendChild(u),e.children.push(i[r]),r++}return e}}}else{const i=s(t);return typeof e.type=="function"?(c(e),e.component.node.replaceWith(i),t):(e.node.replaceWith(i),t)}}function o(e){f.id=0,f.effectId=0,f.component=e;let t=[...e.effects];const i=e.type(e.props);d(e.component,i),e.effects.forEach((l,r)=>{l.cleanup=t[r].cleanup,(!l.dependencies||a(l.dependencies,t[r].dependencies))&&(l.cleanup&&l.cleanup(),l.cleanup=l.callback())})}function v(e,t,i){for(let l in i)if(i[l]!==t[l]){if(l.startsWith("on")){let r=l.slice("2").toLowerCase();e.removeEventListener(r,t[l]),e.addEventListener(r,i[l])}else e.setAttribute(l,i[l]);t[l]=i[l]}}function g(e){let t;return{render(i){if(t)t=d(t,i);else{const l=s(i);e.appendChild(l),t=i,console.log(t)}},unmount(){typeof t.type=="function"?(c(t),t.component.node.remove()):t.node.remove(),t=null}}}function E(e,t,...i){for(let r in i)(typeof i[r]=="string"||typeof i[r]=="number")&&(i[r]={type:"text",value:i[r]});let l={type:e,props:t||{},children:i};return typeof e=="function"&&(l.cache=[],l.effects=[],l.component=null),l}function b(e){const{id:t,component:i}=f,{cache:l}=i;f.id+=1,l[t]==null&&(l[t]={value:typeof e=="function"?e():e});function r(u){typeof u=="function"?l[t].value=u(l[t].value):l[t].value=u,o(i)}return[l[t].value,r]}function I(e,t){const{effectId:i,component:l}=f,{effects:r}=l;f.effectId+=1,r[i]={dependencies:t,callback:e}}function L(e,t){const{id:i,component:l}=f,{cache:r}=l;return f.id+=1,t?r[i]==null?(r[i]={dependencies:t},r[i].value=e(),r[i].value):(a(r[i].dependencies,t)&&(r[i].value=e(),r[i].dependencies=t),r[i].value):e()}n.createElement=E,n.createRoot=g,n.useEffect=I,n.useMemo=L,n.useState=b,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});
